import React, { Component } from 'react';
import { findDOMNode } from 'react-dom';
import { Keyboard } from 'grommet';
import { focusedChildIndex, focusChildByIndex, focusNextElement, focusPrevElement, hasKeyboardChildren, } from '../DOM';
import { StyledTrComponent } from '../StyledTableComponents';
class TrComponent extends Component {
    constructor() {
        super(...arguments);
        this.selectNextRow = () => {
            const { selectRow } = this.props;
            const activeChild = focusedChildIndex(this.container);
            return selectRow(true, activeChild);
        };
        this.selectPrevRow = () => {
            const { selectRow } = this.props;
            const activeChild = focusedChildIndex(this.container);
            return selectRow(false, activeChild);
        };
        this.selectNextChild = () => {
            if (focusNextElement(this.container)) {
                return true;
            }
            return this.selectNextRow();
        };
        this.selectPrevChild = () => {
            if (focusPrevElement(this.container)) {
                return true;
            }
            return this.selectPrevRow();
        };
        this.selectFirstChild = activeIndex => focusChildByIndex(this.container, activeIndex);
    }
    render() {
        return (React.createElement(Keyboard, { onTab: e => {
                e.preventDefault();
                if (e.shiftKey) {
                    this.selectPrevChild();
                }
                else {
                    this.selectNextChild();
                }
            }, onLeft: e => {
                if (!hasKeyboardChildren(document.activeElement)) {
                    e.preventDefault();
                    this.selectPrevChild();
                }
            }, onRight: e => {
                if (!hasKeyboardChildren(document.activeElement)) {
                    e.preventDefault();
                    this.selectNextChild();
                }
            }, onUp: e => {
                if (!hasKeyboardChildren(document.activeElement)) {
                    e.preventDefault();
                    this.selectPrevRow();
                }
            }, onDown: e => {
                if (!hasKeyboardChildren(document.activeElement)) {
                    e.preventDefault();
                    this.selectNextRow();
                }
            } },
            React.createElement(StyledTrComponent, Object.assign({ direction: "row", role: "row", ref: el => {
                    // eslint-disable-next-line react/no-find-dom-node
                    this.container = findDOMNode(el);
                } }, this.props))));
    }
}
export default TrComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJDb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9QYWdpbmdUYWJsZS9jb21wb25lbnRzL1RyQ29tcG9uZW50LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUN6QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDbkMsT0FBTyxFQUNMLGlCQUFpQixFQUNqQixpQkFBaUIsRUFDakIsZ0JBQWdCLEVBQ2hCLGdCQUFnQixFQUNoQixtQkFBbUIsR0FDcEIsTUFBTSxRQUFRLENBQUM7QUFFaEIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFLN0QsTUFBTSxXQUFZLFNBQVEsU0FBNEI7SUFBdEQ7O1FBR0Usa0JBQWEsR0FBRyxHQUFHLEVBQUU7WUFDbkIsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDakMsTUFBTSxXQUFXLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3RELE9BQU8sU0FBUyxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUM7UUFFRixrQkFBYSxHQUFHLEdBQUcsRUFBRTtZQUNuQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUNqQyxNQUFNLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdEQsT0FBTyxTQUFTLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQztRQUVGLG9CQUFlLEdBQUcsR0FBRyxFQUFFO1lBQ3JCLElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUNwQyxPQUFPLElBQUksQ0FBQzthQUNiO1lBQ0QsT0FBTyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDOUIsQ0FBQyxDQUFDO1FBRUYsb0JBQWUsR0FBRyxHQUFHLEVBQUU7WUFDckIsSUFBSSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQ3BDLE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFDRCxPQUFPLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUM5QixDQUFDLENBQUM7UUFFRixxQkFBZ0IsR0FBRyxXQUFXLENBQUMsRUFBRSxDQUMvQixpQkFBaUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBa0RuRCxDQUFDO0lBaERDLE1BQU07UUFDSixPQUFPLENBQ0wsb0JBQUMsUUFBUSxJQUNQLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDVCxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRTtvQkFDZCxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7aUJBQ3hCO3FCQUFNO29CQUNMLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztpQkFDeEI7WUFDSCxDQUFDLEVBQ0QsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUNWLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUU7b0JBQ2hELENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztvQkFDbkIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO2lCQUN4QjtZQUNILENBQUMsRUFDRCxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUU7Z0JBQ1gsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRTtvQkFDaEQsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO29CQUNuQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7aUJBQ3hCO1lBQ0gsQ0FBQyxFQUNELElBQUksRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDUixJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFFO29CQUNoRCxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7b0JBQ25CLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztpQkFDdEI7WUFDSCxDQUFDLEVBQ0QsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFO2dCQUNWLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUU7b0JBQ2hELENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztvQkFDbkIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO2lCQUN0QjtZQUNILENBQUM7WUFFRCxvQkFBQyxpQkFBaUIsa0JBQ2hCLFNBQVMsRUFBQyxLQUFLLEVBQ2YsSUFBSSxFQUFDLEtBQUssRUFDVixHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUU7b0JBQ1Isa0RBQWtEO29CQUNsRCxJQUFJLENBQUMsU0FBUyxHQUFHLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDbkMsQ0FBQyxJQUNHLElBQUksQ0FBQyxLQUFLLEVBQ2QsQ0FDTyxDQUNaLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFFRCxlQUFlLFdBQVcsQ0FBQyJ9