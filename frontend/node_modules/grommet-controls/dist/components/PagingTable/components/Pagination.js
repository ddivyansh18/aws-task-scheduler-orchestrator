var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import React, { Component } from 'react';
import styled from 'styled-components';
import { Box, Button, Select, Text } from 'grommet';
import { Previous } from 'grommet-icons/icons/Previous';
import { Next } from 'grommet-icons/icons/Next';
import { NumberInput } from '../../NumberInput';
const defaultButton = (_a) => {
    var { disabled, Icon, onClick, label } = _a, other = __rest(_a, ["disabled", "Icon", "onClick", "label"]);
    return (React.createElement(Button, Object.assign({ icon: React.createElement(Icon, null), disabled: disabled, onClick: onClick, label: label, plain: true }, other)));
};
const StyledButton = styled(defaultButton) `
  width: 150px;
  padding: 10px 0;
`;
const StyledPageInput = styled(NumberInput) `
  max-width: 180px;
`;
const StyledSelect = styled(Select) `
  max-width: 150px;
`;
export default class ReactTablePagination extends Component {
    constructor(props, context) {
        super(props, context);
        this.getSafePage = page => {
            const pg = Number.isNaN(page) ? this.props.page : page;
            return Math.min(Math.max(pg, 0), this.props.pages - 1);
        };
        this.changePage = page => {
            const pg = this.getSafePage(page);
            this.setState({ page: pg });
            if (this.props.page !== pg) {
                this.props.onPageChange(pg);
            }
        };
        this.applyPage = e => {
            if (e) {
                e.preventDefault();
            }
            const { page } = this.state;
            this.changePage(page === '' ? this.props.page : page);
        };
        this.state = { page: props.page };
    }
    static getDerivedStateFromProps(nextProps) {
        return {
            page: nextProps.page,
        };
    }
    renderPaging() {
        const { page, showPageJump, pageText, ofText, pages } = this.props;
        let pageJump;
        if (showPageJump) {
            pageJump = (
            //@ts-ignore
            React.createElement(StyledPageInput, { "aria-label": "Select page to jump to", onChange: e => {
                    const val = e.target.value;
                    if (val === '') {
                        return this.setState({ page: val });
                    }
                    const pg = parseInt(val, 10) - 1;
                    this.setState({ page: this.getSafePage(pg) });
                    return false;
                }, value: typeof this.state.page === 'string' ? '' : this.state.page + 1, onBlur: this.applyPage, onKeyPress: e => {
                    if (e.which === 13 || e.keyCode === 13) {
                        this.applyPage(null);
                    }
                } }));
        }
        else {
            pageJump = React.createElement(Text, null, page + 1);
        }
        return (React.createElement(Box, { direction: "row", align: "center", gap: "small" },
            React.createElement(Text, null, `${pageText} `),
            pageJump,
            React.createElement("span", { style: { whiteSpace: 'nowrap' } }, `${ofText} ${pages ||
                1}`)));
    }
    renderPageSize() {
        const { showPageSizeOptions, onPageSizeChange, pageSizeOptions, pageSize, } = this.props;
        if (showPageSizeOptions) {
            return (React.createElement(Box, { direction: "row" },
                React.createElement(StyledSelect, { "aria-label": "Select rows per page", onChange: (e) => onPageSizeChange(Number(e.option.split(' ')[0])), value: `${pageSize} ${this.props.rowsText}`, options: pageSizeOptions.map(option => `${option} ${this.props.rowsText}`) })));
        }
        return null;
    }
    renderPrevious() {
        const { PreviousComponent = StyledButton, canPrevious, page } = this.props;
        return (React.createElement(Box, { direction: "row" },
            React.createElement(PreviousComponent, { "aria-label": "Move to previous page", Icon: Previous, label: this.props.previousText, onClick: canPrevious ? () => this.changePage(page - 1) : null, disabled: !canPrevious })));
    }
    renderNext() {
        const { page, canNext, NextComponent = StyledButton } = this.props;
        return (React.createElement(Box, { direction: "row" },
            React.createElement(NextComponent, { "aria-label": "Move to next page", reverse: true, Icon: Next, label: this.props.nextText, onClick: canNext ? () => this.changePage(page + 1) : null, disabled: !canNext })));
    }
    render() {
        const props = this.props.getPaginationProps(this.props);
        return (React.createElement(Box, Object.assign({}, Object.assign({
            direction: 'row',
            align: 'center',
            justify: 'between',
            fill: 'horizontal',
        }, props)),
            this.renderPrevious(),
            this.renderPaging(),
            this.renderPageSize(),
            this.renderNext()));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFnaW5hdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1BhZ2luZ1RhYmxlL2NvbXBvbmVudHMvUGFnaW5hdGlvbi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUN6QyxPQUFPLE1BQU0sTUFBTSxtQkFBbUIsQ0FBQztBQUN2QyxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ3BELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFaEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBMEJoRCxNQUFNLGFBQWEsR0FBRyxDQUFDLEVBQTRDLEVBQUUsRUFBRTtRQUFoRCxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssT0FBWSxFQUFQLEtBQUssY0FBMUMsd0NBQTRDLENBQUY7SUFBTyxPQUFBLENBQ3RFLG9CQUFDLE1BQU0sa0JBQ0wsSUFBSSxFQUFFLG9CQUFDLElBQUksT0FBRyxFQUNkLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLE9BQU8sRUFBRSxPQUFPLEVBQ2hCLEtBQUssRUFBRSxLQUFLLEVBQ1osS0FBSyxFQUFFLElBQUksSUFDUCxLQUFLLEVBQ1QsQ0FDSCxDQUFBO0NBQUEsQ0FBQztBQUVGLE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQTs7O0NBR3pDLENBQUM7QUFFRixNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUE7O0NBRTFDLENBQUM7QUFFRixNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFD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